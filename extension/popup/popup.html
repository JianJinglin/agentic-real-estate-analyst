<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Rancho - Property Analysis</title>
  <link rel="stylesheet" href="popup.css">
</head>
<body>
  <div class="container">
    <header>
      <h1>ğŸ  Rancho</h1>
      <p>Property Cashflow Analysis Tool</p>
    </header>

    <div class="tabs">
      <button class="tab active" data-tab="settings">âš™ï¸ Settings</button>
      <button class="tab" data-tab="assumptions">ğŸ“Š Parameters</button>
      <button class="tab" data-tab="help">â“ Help</button>
    </div>

    <!-- Settings Tab -->
    <div class="tab-content active" id="settings">
      <div class="section">
        <h3>ğŸ”— GitHub Connection</h3>
        <div class="form-group">
          <label>GitHub Token</label>
          <input type="password" id="github-token" placeholder="ghp_xxxx...">
          <small>Personal Access Token with repo permission</small>
        </div>
        <div class="form-group">
          <label>Repository (owner/repo)</label>
          <input type="text" id="github-repo" placeholder="JianJinglin/agentic-real-estate-analyst">
        </div>
        <div class="form-group">
          <label>CSV File Path</label>
          <input type="text" id="github-path" placeholder="data/properties.csv">
        </div>
        <button id="save-github" class="btn-primary">ğŸ’¾ Save Config</button>
        <div id="github-status" class="status"></div>
      </div>
    </div>

    <!-- Assumptions Tab -->
    <div class="tab-content" id="assumptions">
      <div class="section">
        <h3>ğŸ’° Loan Parameters</h3>
        <div class="form-group">
          <label>Down Payment (%)</label>
          <input type="number" id="down-payment" value="20" min="0" max="100">
        </div>
        <div class="form-group">
          <label>Interest Rate (%)</label>
          <input type="number" id="interest-rate" value="7.0" step="0.1" min="0">
        </div>
        <div class="form-group">
          <label>Loan Term (years)</label>
          <input type="number" id="loan-term" value="30" min="1" max="40">
        </div>
      </div>

      <div class="section">
        <h3>ğŸ¦ Expense Parameters</h3>
        <div class="form-group">
          <label>Property Tax Rate (%/year)</label>
          <input type="number" id="property-tax" value="1.25" step="0.01" min="0">
        </div>
        <div class="form-group">
          <label>Insurance Rate (%/year)</label>
          <input type="number" id="insurance-rate" value="0.5" step="0.01" min="0">
        </div>
        <div class="form-group">
          <label>Maintenance Rate (%/year)</label>
          <input type="number" id="maintenance-rate" value="1" step="0.1" min="0">
        </div>
        <div class="form-group">
          <label>Vacancy Rate (%)</label>
          <input type="number" id="vacancy-rate" value="5" step="1" min="0" max="100">
        </div>
      </div>

      <button id="save-assumptions" class="btn-primary">ğŸ’¾ Save Parameters</button>
      <button id="reset-assumptions" class="btn-secondary">ğŸ”„ Reset to Defaults</button>
      <div id="assumptions-status" class="status"></div>
    </div>

    <!-- Help Tab -->
    <div class="tab-content" id="help">
      <div class="section">
        <h3>ğŸ“– How to Use</h3>
        <ol>
          <li>Open a Zillow property detail page</li>
          <li>Click the "ğŸ  Rancho" button on the page</li>
          <li>View the cashflow analysis results</li>
          <li>Click "Add to My Excel" to save to GitHub</li>
        </ol>
      </div>

      <div class="section">
        <h3>ğŸ”‘ Get GitHub Token</h3>
        <ol>
          <li>Visit <a href="https://github.com/settings/tokens" target="_blank">GitHub Settings > Tokens</a></li>
          <li>Click "Generate new token (classic)"</li>
          <li>Check the "repo" permission</li>
          <li>Copy the generated Token</li>
        </ol>
      </div>

      <div class="section">
        <h3>ğŸ“Š Calculation Formulas</h3>
        <p><strong>Monthly Cashflow</strong> = Rent - Mortgage - Tax - Insurance - HOA - Maintenance - Vacancy</p>
        <p><strong>CoC Return</strong> = Annual Cashflow / Total Cash Invested Ã— 100%</p>
        <p><strong>Cap Rate</strong> = Annual NOI / Price Ã— 100%</p>
      </div>
    </div>

    <footer>
      <p>v1.0.0 | Made with â¤ï¸</p>
    </footer>
  </div>

  <script src="popup.js"></script>
</body>
</html>
